# Habr InfoSec RSS Telegram Bot

Это Telegram-бот, написанный на Go, который предоставляет RSS-ленту статей с Хабра по теме информационной безопасности.

## Функциональность

- Получает последние статьи из категории "информационная безопасность" на Хабре
- Отправляет статьи в формате: заголовок, краткое описание и ссылка на оригинал
- Предотвращает дублирование статей с помощью отслеживания GUID
- Автоматически очищает старые статьи из памяти (через 24 часа)
- Поддерживает команды:
  - `/start` - приветственное сообщение
  - `/help` - справка по командам
  - `/infosec` или `/security` - последние статьи по информационной безопасности

## GitHub Pages и веб-интерфейс

Проект включает веб-интерфейс для бота, доступный через GitHub Pages, с полнофункциональным RSS-функционалом. Чтобы активировать GitHub Pages:

1. Запушьте этот репозиторий на GitHub
2. Перейдите в настройки репозитория (Settings)
3. Прокрутите вниз до раздела "Pages"
4. В выпадающем списке "Source" выберите "Deploy from a branch"
5. Выберите ветку "main" и папку "/docs"
6. Нажмите "Save"
7. После активации сайт будет доступен по адресу: https://<your-username>.github.io/<repository-name>

Веб-интерфейс включает:

- Интерактивный чат с настоящей функциональностью получения статей из RSS ленты Хабра по командам /infosec и /security
- Описание функциональности бота
- Документацию по командам
- Примеры использования

## API для веб-интерфейса

Приложение также запускает веб-сервер с API-эндпоинтами:

- `/api/articles` - возвращает последние статьи из RSS-ленты информационной безопасности Хабра в формате JSON
- `/` - отдает веб-интерфейс из папки `/docs`

## Установка и запуск

1. Установите Go (версия 1.21 или выше)

2. Скачайте зависимости:
```bash
go mod tidy
```

3. Создайте Telegram-бота у [@BotFather](https://t.me/BotFather) и получите токен

4. Запустите бота:
```bash
TELEGRAM_BOT_TOKEN=ваш_токен_бота go run main.go
```

Приложение запустит как Telegram-бота, так и веб-сервер с API и веб-интерфейсом.

## Использование

1. Найдите созданного бота в Telegram
2. Отправьте команду `/start`
3. Используйте команду `/infosec` или `/security`, чтобы получить последние статьи по информационной безопасности
4. Или откройте веб-интерфейс по адресу `http://localhost:8080` (или другому порту, если указан в переменной PORT)

## Технические улучшения

- **Потокобезопасность**: Использование мьютексов для защиты разделяемых данных при многопоточной обработке сообщений
- **Управление памятью**: Автоматическая очиска старых статей из памяти каждые час для предотвращения утечек памяти
- **Улучшенная обработка ошибок**: Более надежная обработка ошибок при отправке сообщений в Telegram
- **Надежность**: Продолжение работы при ошибках отдельных операций, а не полный сбой
- **Таймауты**: Добавлен HTTP-клиент с таймаутами для надежной работы с RSS-каналами
- **Безопасность**: Правильное экранирование HTML-символов в сообщениях
- **Веб-интерфейс**: Интерактивный веб-чат с полнофункциональным RSS-функционалом через API
- **CORS поддержка**: API поддерживает CORS для доступа из браузерных приложений

## Структура проекта

- `main.go` - основной файл с логикой бота и веб-сервера
- `go.mod` - файл зависимостей Go
- `go.sum` - контрольные суммы зависимостей
- `run.sh` - скрипт для запуска бота
- `.env.example` - пример файла с переменными окружения
- `docs/` - файлы для GitHub Pages с веб-интерфейсом бота

## Технические детали

- Использует RSS-ленту Хабра: `https://habr.com/ru/rss/hub/infosecurity/all/?fl=ru`
- Для парсинга RSS используется библиотека `gofeed`
- Для взаимодействия с Telegram API используется `go-telegram-bot-api`
- Реализовано ограничение частоты запросов и дедупликация статей
- Статьи автоматически удаляются из памяти через 24 часа после добавления
- Веб-интерфейс получает статьи через внутренний API, что позволяет избежать CORS-ограничений браузеров